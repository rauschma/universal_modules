"use strict";

exports._ = function(clientRequire, clientExports) {
    return {
        define: function (importNames, moduleBody) {
            if (arguments.length === 1 && typeof importNames === "function") {
                moduleBody = importNames;
                importNames = [];
            }
            
            // Don't use require directly as a map argument, be safe about optional parameters
            var imports = importNames.map(function (x) { return clientRequire(x) });
            var data = moduleBody.apply(null, imports);
            if (data) {
                Object.keys(data).forEach(function(key) {
                    clientExports[key] = data[key];
                });
            }
        }
    };
}

    
